--- bacula-web-5.2.11/core/global.inc.php	2013-01-24 19:43:27.543708741 +0200
+++ bacula-web-5.2.11/core/global.inc.php	2013-01-24 19:43:27.543708741 +0200
@@ -20,12 +20,11 @@
 define('BW_LIBS', BW_ROOT . '/application/libs/');
 define('BW_EXTERNAL', BW_OBJ . 'external');
 
-define('BW_PHPLOT', BW_EXTERNAL . '/phplot/');
-define('BW_SMARTY', BW_EXTERNAL . '/smarty/libs/');
-define('BW_SMARTY_GETTEXT', BW_EXTERNAL . '/smarty-gettext/');
+define('BW_PHPLOT', '/usr/share/php/phplot/');
+define('BW_SMARTY', '/usr/share/php/Smarty/');
 
 // Configuration
-define('CONFIG_DIR', BW_ROOT . "/application/config/");
+define('CONFIG_DIR', '/etc/webapps/bacula-web/');
 define('CONFIG_FILE', CONFIG_DIR . "config.php");
 
 // Main application
@@ -33,7 +32,6 @@
 
 // Template engine
 require_once( BW_SMARTY . "Smarty.class.php");
-require_once( BW_SMARTY_GETTEXT . "smarty_gettext.php" );
 
 // Graph
 require_once( BW_PHPLOT . "phplot.php");
@@ -77,7 +75,8 @@
 
 // Views
 define('VIEW_DIR', BW_ROOT . "/application/view/");
-define('VIEW_CACHE_DIR', "application/view/cache");
+define('VIEW_CACHE_DIR', '/var/cache/bacula-web');
+define('VIEW_CACHE_URL', 'cache');
 
 // Locale
 define('LOCALE_DIR', BW_ROOT . '/application/locale');
--- bacula-web-5.2.11/core/i18n/ctranslation.class.php~	2012-08-11 13:14:04.000000000 +0300
+++ bacula-web-5.2.11/core/i18n/ctranslation.class.php	2013-01-24 19:38:38.147079534 +0200
@@ -32,9 +32,6 @@
     }
 
     function set_Language(&$template) {
-        // Template engine block registration
-        $template->register_block('t', 'smarty_translate');
-
         // Setting up language
         putenv("LANGUAGE=" . $this->language . '.' . $this->charset);
         putenv("LANG=" . $this->language . '.' . $this->charset);
--- bacula-web-5.2.11/core/graph/cgraph.class.php	2012-12-14 06:56:54.000000000 +0200
+++ bacula-web-5.2.11/core/graph/cgraph.class.php	2013-01-24 19:51:05.000000000 +0200
@@ -31,6 +31,7 @@
 
     function __construct($filename = "graph.png") {
         $this->img_filename = VIEW_CACHE_DIR . '/' . $filename;
+        $this->img_fileurl = VIEW_CACHE_URL . '/' . $filename;
     }
 
     public function SetData($data_in, $graph_type) {
@@ -51,7 +52,7 @@
     }
 
     private function get_Filepath() {
-		return $this->img_filename;
+		return $this->img_fileurl;
     }
 	
     // ==================================================================================
